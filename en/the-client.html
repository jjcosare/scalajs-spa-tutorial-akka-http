
<!DOCTYPE HTML>
<html lang="en" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>The Client Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="routing.html" />
    
    
    <link rel="prev" href="application-structure.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="getting-started.html">
            
                <a href="getting-started.html">
            
                    
                    Getting started
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="application-structure.html">
            
                <a href="application-structure.html">
            
                    
                    Application structure
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.3.1" data-path="the-client.html">
            
                <a href="the-client.html">
            
                    
                    The Client
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.1" data-path="routing.html">
            
                <a href="routing.html">
            
                    
                    Routing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2" data-path="main-menu.html">
            
                <a href="main-menu.html">
            
                    
                    Main menu
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3" data-path="dashboard.html">
            
                <a href="dashboard.html">
            
                    
                    Dashboard
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.4" data-path="css-in-scala.html">
            
                <a href="css-in-scala.html">
            
                    
                    CSS in Scala
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.5" data-path="integrating-javascript-components.html">
            
                <a href="integrating-javascript-components.html">
            
                    
                    Integrating JavaScript components
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.6" data-path="todo-module-and-data-flow.html">
            
                <a href="todo-module-and-data-flow.html">
            
                    
                    Todo module and data flow
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.7" data-path="autowire-and-boopickle.html">
            
                <a href="autowire-and-boopickle.html">
            
                    
                    Autowire and BooPickle
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="server-side.html">
            
                <a href="server-side.html">
            
                    
                    Server side
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="testing.html">
            
                <a href="testing.html">
            
                    
                    Testing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="debugging.html">
            
                <a href="debugging.html">
            
                    
                    Debugging
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="logging.html">
            
                <a href="logging.html">
            
                    
                    Logging
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="sbt-build-definition.html">
            
                <a href="sbt-build-definition.html">
            
                    
                    SBT build definition
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="using-resources-from-webjars.html">
            
                <a href="using-resources-from-webjars.html">
            
                    
                    Using resources from WebJars
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="production-build.html">
            
                <a href="production-build.html">
            
                    
                    Production build
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="faq.html">
            
                <a href="faq.html">
            
                    
                    FAQ
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="what-next.html">
            
                <a href="what-next.html">
            
                    
                    What next?
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >The Client</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="the-client">The Client</h1>
<p>As is typical for SPAs the client consists of a single HTML file and a number of supporting resources (JS and CSS). One of these resources is the actual JavaScript
code generated by Scala.js from the Scala sources. The HTML is defined under the server project in <code>twirl/views/index.scala.html</code> using Play template system. 
Here you&apos;ll find the usual HTML things like links to CSS and JS files. As you can see, the <code>&lt;body&gt;</code> element is pretty empty, because all the
HTML will be generated by the application itself. The <code>@scalajs</code> directive tells the <a href="https://github.com/vmunier/sbt-web-scalajs" target="_blank">ScalaJSWeb plugin</a> 
to insert relevant <code>&lt;script&gt;</code> tags to load the generated JavaScript code and its dependencies.  For your convenience, the <code>_asset</code> function prefixes your assets (css, js, images)
with a CDN link of your choice defined in server/src/main/resources/application.conf. Note that the line with &quot;${?APPLICATION_CDN}&quot; is one way to override default values
in production with environment variables if they are defined.  The <code>_asset</code> function also adds a version to the file name automatically converting main.min.css to main-<code>&lt;version&gt;</code>.min.css in production
which clears client proxy and browser cache when you make changes to the file.  See <a href="https://www.playframework.com/documentation/latest/Assets#Reverse-routing-and-fingerprinting-for-public-assets" target="_blank">PlayFramework Fingerprinting</a>
for more information about this best practice.</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    @scalajs.html.scripts(projectName = &quot;client&quot;, name =&gt; _asset(name).toString, name =&gt; getClass.getResource(s&quot;/public/$name&quot;) != null)
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>Instead of using external JavaScript references to <a href="http://facebook.github.io/react/" target="_blank">React</a>, <a href="http://jquery.com/" target="_blank">jQuery</a>, <a href="http://getbootstrap.com/" target="_blank">Bootstrap</a> and
to a <a href="http://www.chartjs.org/" target="_blank">chart component</a>, the build system combines all these into a single JavaScript file (client-jsdeps.js). See 
<a href="using-resources-from-webjars.html#webjar-javascript">here</a> for details. The last JavaScript reference is the compiled application code.</p>
<p>Once the browser has loaded all the resources, it will call the <code>SPAMain().main()</code> method defined in the
<a href="https://github.com/ochrons/scalajs-spa-tutorial/tree/master/client/src/main/scala/spatutorial/client/SPAMain.scala" target="_blank"><code>SPAMain.scala</code></a> singleton class. This is the 
entry point of the application. The class itself is very simple,</p>
<pre><code class="lang-scala"><span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">SPAMain</span> </span>{

    <span class="hljs-meta">@JSExportTopLevel</span>(<span class="hljs-string">&quot;SPAMain&quot;</span>)
    <span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getInstance</span></span>(): <span class="hljs-keyword">this</span>.<span class="hljs-keyword">type</span> = <span class="hljs-keyword">this</span>

  <span class="hljs-meta">@JSExport</span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span></span>(args: <span class="hljs-type">Array</span>[<span class="hljs-type">String</span>]): <span class="hljs-type">Unit</span> = {
    log.warn(<span class="hljs-string">&quot;Application starting&quot;</span>)
    <span class="hljs-comment">// send log messages also to the server</span>
    log.enableServerLogging(<span class="hljs-string">&quot;/logging&quot;</span>)
    log.info(<span class="hljs-string">&quot;This message goes to server as well&quot;</span>)

    <span class="hljs-comment">// create stylesheet</span>
    <span class="hljs-type">GlobalStyles</span>.addToDocument()
    <span class="hljs-comment">// create the router</span>
    <span class="hljs-keyword">val</span> router = <span class="hljs-type">Router</span>(<span class="hljs-type">BaseUrl</span>.until_#, routerConfig)
    <span class="hljs-comment">// tell React to render the router in the document body</span>
    router().renderIntoDOM(dom.document.getElementById(<span class="hljs-string">&quot;root&quot;</span>))
  }
}
</code></pre>
<p>The externally accessible classes and functions are annotated with <code>@JSExport</code> so the Scala.js compiler knows not to optimize them away and make them available
with those exact names in the global scope.</p>
<p>What <code>main()</code> does is simply to create a <em>router</em> and instruct React to render it inside the document <code>&lt;div id=&quot;root&quot;&gt;</code> tag.</p>
<p>Now at this point you&apos;ve seen couple of references to React and might wonder what&apos;s it about. <a href="http://facebook.github.io/react/" target="_blank">React</a> is a JavaScript
library for building user interfaces, developed by Facebook. You might ask &quot;why use a JavaScript library with Scala.js if Scala is so great&quot; and yes,
it might make sense to do a similar library in Scala.js but since it&apos;s already there, why not use it. And to sweeten the deal there is a very nice
wrapper for React called <a href="https://github.com/japgolly/scalajs-react" target="_blank">scalajs-react</a> by <a href="https://github.com/japgolly" target="_blank">David Barri (@japgolly)</a>.</p>
<p>There are also other Scala.js libraries available for building SPAs but I wanted to go with React, so that&apos;s what we&apos;ll use in this tutorial :)</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="application-structure.html" class="navigation navigation-prev " aria-label="Previous page: Application structure">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="routing.html" class="navigation navigation-next " aria-label="Next page: Routing">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"The Client","level":"1.3.1","depth":2,"next":{"title":"Routing","level":"1.3.1.1","depth":3,"path":"routing.md","ref":"routing.md","articles":[]},"previous":{"title":"Application structure","level":"1.3","depth":1,"path":"application-structure.md","ref":"application-structure.md","articles":[{"title":"The Client","level":"1.3.1","depth":2,"path":"the-client.md","ref":"the-client.md","articles":[{"title":"Routing","level":"1.3.1.1","depth":3,"path":"routing.md","ref":"routing.md","articles":[]},{"title":"Main menu","level":"1.3.1.2","depth":3,"path":"main-menu.md","ref":"main-menu.md","articles":[]},{"title":"Dashboard","level":"1.3.1.3","depth":3,"path":"dashboard.md","ref":"dashboard.md","articles":[]},{"title":"CSS in Scala","level":"1.3.1.4","depth":3,"path":"css-in-scala.md","ref":"css-in-scala.md","articles":[]},{"title":"Integrating JavaScript components","level":"1.3.1.5","depth":3,"path":"integrating-javascript-components.md","ref":"integrating-javascript-components.md","articles":[]},{"title":"Todo module and data flow","level":"1.3.1.6","depth":3,"path":"todo-module-and-data-flow.md","ref":"todo-module-and-data-flow.md","articles":[]},{"title":"Autowire and BooPickle","level":"1.3.1.7","depth":3,"path":"autowire-and-boopickle.md","ref":"autowire-and-boopickle.md","articles":[]}]},{"title":"Server side","level":"1.3.2","depth":2,"path":"server-side.md","ref":"server-side.md","articles":[]}]},"dir":"ltr"},"config":{"plugins":[],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"language":"en","gitbook":"*"},"file":{"path":"the-client.md","mtime":"2019-06-24T10:58:06.431Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-04-13T22:41:05.515Z"},"basePath":".","book":{"language":"en"}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

