
<!DOCTYPE HTML>
<html lang="en" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Routing Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="main-menu.html" />
    
    
    <link rel="prev" href="the-client.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="getting-started.html">
            
                <a href="getting-started.html">
            
                    
                    Getting started
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="application-structure.html">
            
                <a href="application-structure.html">
            
                    
                    Application structure
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="the-client.html">
            
                <a href="the-client.html">
            
                    
                    The Client
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.3.1.1" data-path="routing.html">
            
                <a href="routing.html">
            
                    
                    Routing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2" data-path="main-menu.html">
            
                <a href="main-menu.html">
            
                    
                    Main menu
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3" data-path="dashboard.html">
            
                <a href="dashboard.html">
            
                    
                    Dashboard
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.4" data-path="css-in-scala.html">
            
                <a href="css-in-scala.html">
            
                    
                    CSS in Scala
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.5" data-path="integrating-javascript-components.html">
            
                <a href="integrating-javascript-components.html">
            
                    
                    Integrating JavaScript components
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.6" data-path="todo-module-and-data-flow.html">
            
                <a href="todo-module-and-data-flow.html">
            
                    
                    Todo module and data flow
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.7" data-path="autowire-and-boopickle.html">
            
                <a href="autowire-and-boopickle.html">
            
                    
                    Autowire and BooPickle
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="server-side.html">
            
                <a href="server-side.html">
            
                    
                    Server side
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="testing.html">
            
                <a href="testing.html">
            
                    
                    Testing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="debugging.html">
            
                <a href="debugging.html">
            
                    
                    Debugging
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="logging.html">
            
                <a href="logging.html">
            
                    
                    Logging
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="sbt-build-definition.html">
            
                <a href="sbt-build-definition.html">
            
                    
                    SBT build definition
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="using-resources-from-webjars.html">
            
                <a href="using-resources-from-webjars.html">
            
                    
                    Using resources from WebJars
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="production-build.html">
            
                <a href="production-build.html">
            
                    
                    Production build
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="faq.html">
            
                <a href="faq.html">
            
                    
                    FAQ
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="what-next.html">
            
                <a href="what-next.html">
            
                    
                    What next?
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Routing</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="routing">Routing</h1>
<p>A critical feature in a SPA is navigation between &quot;pages&quot; within the application. Of course they are not real pages, since it&apos;s a <em>Single Page</em> Application,
but from the user point of view it looks like that. A typical example of a SPA is Gmail where the URL in the browser reflects the state of the application.</p>
<p>Since we are not loading new pages from the server, we cannot use the regular browser navigation but need to provide one ourselves. This is called <em>routing</em> and
is provided by many JS frameworks like AngularJS. Scala.js itself is not an application framework so there is no ready made router component provided by it. But
we are lucky to have developers like @japgolly who go through all the pain and suffering to deliver great libraries for the rest of us. In the tutorial I&apos;m
using <a href="https://github.com/japgolly/scalajs-react/blob/master/extra/ROUTER2.md" target="_blank"><code>scalajs-react</code> router</a> which nicely integrates with <code>scalajs-react</code> and provides
a seamless way to manage routes and navigate between them.</p>
<p>The way it works is that you basically create route definitions, register them with the router and off it goes binding your components as the URL changes. In 
this tutorial we have a total of <em>two</em> modules/routes/views just to demonstrate how to use the router.</p>
<p>As this is a Single Page Application, all routes are defined under one router configuration, <code>routerConfig</code>.</p>
<pre><code class="lang-scala"><span class="hljs-keyword">val</span> routerConfig = <span class="hljs-type">RouterConfigDsl</span>[<span class="hljs-type">Loc</span>].buildConfig { dsl =&gt;
  <span class="hljs-keyword">import</span> dsl._

  <span class="hljs-keyword">val</span> todoWrapper = <span class="hljs-type">SPACircuit</span>.connect(_.todos)
  <span class="hljs-comment">// wrap/connect components to the circuit</span>
  (staticRoute(root, <span class="hljs-type">DashboardLoc</span>) ~&gt; renderR(ctl =&gt; <span class="hljs-type">SPACircuit</span>.wrap(m =&gt; m)(proxy =&gt; <span class="hljs-type">Dashboard</span>(ctl, proxy)))
    | staticRoute(<span class="hljs-string">&quot;#todo&quot;</span>, <span class="hljs-type">TodoLoc</span>) ~&gt; renderR(ctl =&gt; todoWrapper(<span class="hljs-type">Todo</span>(_)))
    ).notFound(redirectToPage(<span class="hljs-type">DashboardLoc</span>)(<span class="hljs-type">Redirect</span>.<span class="hljs-type">Replace</span>))
}.renderWith(layout)
</code></pre>
<p>Here we just register the two routes using the <code>staticRoute</code>. First route is our main route which is attached to the special <code>root</code>. The second
route is attached to <code>#todo</code> path. Finally any route that is not matched results in a redirect to the Dashboard. You could also use &quot;clean&quot; paths 
without the hash, but then your server must be prepared to serve correct content even when there is a sub-path defined.</p>
<p>The router provides the base HTML code (layout) and integrates a <code>MainMenu</code> component for the application. SPA tutorial
uses Bootstrap CSS to provide a nice looking layout, but you can use whatever CSS framework you wish just by changing the CSS class definitions.</p>
<pre><code class="lang-scala"><span class="hljs-keyword">import</span> japgolly.scalajs.react.vdom.html_&lt;^._
<span class="hljs-keyword">val</span> todoCountWrapper = <span class="hljs-type">SPACircuit</span>.connect(_.todos.map(_.items.count(!_.completed)).toOption)
<span class="hljs-comment">// base layout for all pages</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">layout</span></span>(c: <span class="hljs-type">RouterCtl</span>[<span class="hljs-type">Loc</span>], r: <span class="hljs-type">Resolution</span>[<span class="hljs-type">Loc</span>]) = {
  &lt;.div(
    <span class="hljs-comment">// here we use plain Bootstrap class names as these are specific to the top level layout defined here</span>
    &lt;.nav(^.className := <span class="hljs-string">&quot;navbar navbar-dark bg-dark fixed-top navbar-expand-md&quot;</span>,
      &lt;.div(^.className := <span class="hljs-string">&quot;container&quot;</span>,
        &lt;.span(^.className := <span class="hljs-string">&quot;navbar-brand&quot;</span>, <span class="hljs-string">&quot;SPA Tutorial&quot;</span>),
        &lt;.div(^.className := <span class="hljs-string">&quot;collapse navbar-collapse&quot;</span>,
          <span class="hljs-comment">// connect menu to model, because it needs to update when the number of open todos changes</span>
          todoCountWrapper(proxy =&gt; <span class="hljs-type">MainMenu</span>(c, r.page, proxy))
        )
      )
    ),
    <span class="hljs-comment">// currently active module is shown in this container</span>
    &lt;.div(^.className := <span class="hljs-string">&quot;container&quot;</span>, r.render())
  )
}
</code></pre>
<p>See how the code looks just like HTML, except it&apos;s type safe and the IDE provides auto-completion! If you insist on having even closer resemblance to HTML,
you can replace the <code>html_&lt;^</code> with <code>all</code> giving you simple <code>div</code> and <code>className</code> tag names. Be warned, however, that this may lead to nasty surprises
down the road because the HTML namespace contains a lot of short, common tag names like <code>a</code> and <code>id</code>. The little extra effort from <code>&lt;.</code> and <code>^.</code> pays
off in the long run.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="the-client.html" class="navigation navigation-prev " aria-label="Previous page: The Client">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="main-menu.html" class="navigation navigation-next " aria-label="Next page: Main menu">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Routing","level":"1.3.1.1","depth":3,"next":{"title":"Main menu","level":"1.3.1.2","depth":3,"path":"main-menu.md","ref":"main-menu.md","articles":[]},"previous":{"title":"The Client","level":"1.3.1","depth":2,"path":"the-client.md","ref":"the-client.md","articles":[{"title":"Routing","level":"1.3.1.1","depth":3,"path":"routing.md","ref":"routing.md","articles":[]},{"title":"Main menu","level":"1.3.1.2","depth":3,"path":"main-menu.md","ref":"main-menu.md","articles":[]},{"title":"Dashboard","level":"1.3.1.3","depth":3,"path":"dashboard.md","ref":"dashboard.md","articles":[]},{"title":"CSS in Scala","level":"1.3.1.4","depth":3,"path":"css-in-scala.md","ref":"css-in-scala.md","articles":[]},{"title":"Integrating JavaScript components","level":"1.3.1.5","depth":3,"path":"integrating-javascript-components.md","ref":"integrating-javascript-components.md","articles":[]},{"title":"Todo module and data flow","level":"1.3.1.6","depth":3,"path":"todo-module-and-data-flow.md","ref":"todo-module-and-data-flow.md","articles":[]},{"title":"Autowire and BooPickle","level":"1.3.1.7","depth":3,"path":"autowire-and-boopickle.md","ref":"autowire-and-boopickle.md","articles":[]}]},"dir":"ltr"},"config":{"plugins":[],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"language":"en","gitbook":"*"},"file":{"path":"routing.md","mtime":"2019-06-24T10:43:35.627Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-04-13T22:41:05.515Z"},"basePath":".","book":{"language":"en"}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

