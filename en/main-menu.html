
<!DOCTYPE HTML>
<html lang="en" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Main menu Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="dashboard.html" />
    
    
    <link rel="prev" href="routing.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="getting-started.html">
            
                <a href="getting-started.html">
            
                    
                    Getting started
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="application-structure.html">
            
                <a href="application-structure.html">
            
                    
                    Application structure
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="the-client.html">
            
                <a href="the-client.html">
            
                    
                    The Client
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.1" data-path="routing.html">
            
                <a href="routing.html">
            
                    
                    Routing
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.3.1.2" data-path="main-menu.html">
            
                <a href="main-menu.html">
            
                    
                    Main menu
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3" data-path="dashboard.html">
            
                <a href="dashboard.html">
            
                    
                    Dashboard
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.4" data-path="css-in-scala.html">
            
                <a href="css-in-scala.html">
            
                    
                    CSS in Scala
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.5" data-path="integrating-javascript-components.html">
            
                <a href="integrating-javascript-components.html">
            
                    
                    Integrating JavaScript components
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.6" data-path="todo-module-and-data-flow.html">
            
                <a href="todo-module-and-data-flow.html">
            
                    
                    Todo module and data flow
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.7" data-path="autowire-and-boopickle.html">
            
                <a href="autowire-and-boopickle.html">
            
                    
                    Autowire and BooPickle
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="server-side.html">
            
                <a href="server-side.html">
            
                    
                    Server side
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="testing.html">
            
                <a href="testing.html">
            
                    
                    Testing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="debugging.html">
            
                <a href="debugging.html">
            
                    
                    Debugging
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="logging.html">
            
                <a href="logging.html">
            
                    
                    Logging
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="sbt-build-definition.html">
            
                <a href="sbt-build-definition.html">
            
                    
                    SBT build definition
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="using-resources-from-webjars.html">
            
                <a href="using-resources-from-webjars.html">
            
                    
                    Using resources from WebJars
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="production-build.html">
            
                <a href="production-build.html">
            
                    
                    Production build
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="faq.html">
            
                <a href="faq.html">
            
                    
                    FAQ
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="what-next.html">
            
                <a href="what-next.html">
            
                    
                    What next?
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Main menu</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="main-menu">Main menu</h1>
<p>The main menu is just another React component that is given the current location and the router as properties. The contents of the menu is defined
statically within the class itself, because the referred locations are anyway all known at compile time. For other kinds of menus you&apos;d want to use
a dynamic system, but static is just fine here.</p>
<pre><code class="lang-scala"><span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Props</span>(<span class="hljs-params">router: <span class="hljs-type">RouterCtl</span>[<span class="hljs-type">Loc</span>], currentLoc: <span class="hljs-type">Loc</span>, proxy: <span class="hljs-type">ModelProxy</span>[<span class="hljs-type">Option</span>[<span class="hljs-type">Int</span>]]</span>)</span>

<span class="hljs-keyword">private</span> <span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MenuItem</span>(<span class="hljs-params">idx: <span class="hljs-type">Int</span>, badge: (<span class="hljs-type">Props</span></span>) <span class="hljs-title">=&gt;</span> <span class="hljs-title">VdomNode</span>, <span class="hljs-title">icon</span></span>: <span class="hljs-type">Icon</span>, location: <span class="hljs-type">Loc</span>)

<span class="hljs-comment">// build the Todo menu item, showing the number of open todos</span>
<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">buildTodoMenu</span></span>(props: <span class="hljs-type">Props</span>): <span class="hljs-type">VdomElement</span> = {
  <span class="hljs-keyword">val</span> todoCount = props.proxy().getOrElse(<span class="hljs-number">0</span>)
  &lt;.span(
    &lt;.span(<span class="hljs-string">&quot; Todo &quot;</span>),
    &lt;.span(bss.badgeOpt(<span class="hljs-type">CommonStyle</span>.danger), bss.badgePill, todoCount).when(todoCount &gt; <span class="hljs-number">0</span>)
  )
}

<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> menuItems = <span class="hljs-type">Seq</span>(
  <span class="hljs-type">MenuItem</span>(<span class="hljs-number">1</span>, _ =&gt; <span class="hljs-string">&quot; Dashboard&quot;</span>, <span class="hljs-type">Icon</span>.dashboard, <span class="hljs-type">DashboardLoc</span>),
  <span class="hljs-type">MenuItem</span>(<span class="hljs-number">2</span>, buildTodoMenu, <span class="hljs-type">Icon</span>.check, <span class="hljs-type">TodoLoc</span>)
)
</code></pre>
<p>For each menu item we define a function to generate the label, an icon and the location that was registered in the <code>routerConfig</code>. For Dashboard
the label is simple text, but for Todo we also render the number of open todos, which we get through the <code>ModelProxy</code> property.</p>
<p>To render the menu we just loop over the items and create appropriate tags. For links we need to use the <code>RouterCtl</code> provided in the properties.</p>
<pre><code class="lang-scala"><span class="hljs-keyword">private</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Backend</span>(<span class="hljs-params">$: <span class="hljs-type">BackendScope</span>[<span class="hljs-type">Props</span>, <span class="hljs-type">Unit</span>]</span>) </span>{
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">mounted</span></span>(props: <span class="hljs-type">Props</span>) =
    <span class="hljs-comment">// dispatch a message to refresh the todos</span>
    <span class="hljs-type">Callback</span>.when(props.proxy.value.isEmpty)(props.proxy.dispatchCB(<span class="hljs-type">RefreshTodos</span>))

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">render</span></span>(props: <span class="hljs-type">Props</span>) = {
    &lt;.ul(bss.navbar)(
      <span class="hljs-comment">// build a list of menu items</span>
      menuItems.toVdomArray(item =&gt;
        &lt;.li(^.key := item.idx, <span class="hljs-keyword">if</span>(props.currentLoc == item.location) (^.className := <span class="hljs-string">&quot;nav-item active&quot;</span>) <span class="hljs-keyword">else</span> (^.className := <span class="hljs-string">&quot;nav-item&quot;</span>),
        props.router.link(item.location)(item.icon, <span class="hljs-string">&quot;&quot;</span>, item.badge(props))(^.`<span class="hljs-class"><span class="hljs-keyword">class</span>` </span>:= <span class="hljs-string">&quot;nav-link&quot;</span>)
      ))
    )
  }
}

<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> component = <span class="hljs-type">ScalaComponent</span>.builder[<span class="hljs-type">Props</span>](<span class="hljs-string">&quot;MainMenu&quot;</span>)
  .renderBackend[<span class="hljs-type">Backend</span>]
  .componentDidMount(scope =&gt; scope.backend.mounted(scope.props))
  .build
</code></pre>
<p>Ok, we&apos;ve got the HTML page defined, menu generated and the active component (Dashboard) within the placeholder, what happens next?</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="routing.html" class="navigation navigation-prev " aria-label="Previous page: Routing">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="dashboard.html" class="navigation navigation-next " aria-label="Next page: Dashboard">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Main menu","level":"1.3.1.2","depth":3,"next":{"title":"Dashboard","level":"1.3.1.3","depth":3,"path":"dashboard.md","ref":"dashboard.md","articles":[]},"previous":{"title":"Routing","level":"1.3.1.1","depth":3,"path":"routing.md","ref":"routing.md","articles":[]},"dir":"ltr"},"config":{"plugins":[],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"language":"en","gitbook":"*"},"file":{"path":"main-menu.md","mtime":"2019-06-24T10:43:56.687Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-04-13T22:41:05.515Z"},"basePath":".","book":{"language":"en"}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

